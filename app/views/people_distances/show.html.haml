- content_for :title do
  Compare
  = @person_distance.person1.full_name
  with
  = @person_distance.person2.full_name

= render "members/member_page_header", member: @person_distance.person1.latest_member
= render "members/member_page_header", member: @person_distance.person2.latest_member

%p
  Agreement
  = fraction_to_percentage_display(@person_distance.agreement_fraction_without_absences)

%p
  During their time in Parliament
  = @person_distance.person1.name
  and
  = @person_distance.person2.name
  have voted in the same division
  = pluralize(@person_distance.total_votes, "time")
  - if @person_distance.overlap_dates.first.begin < Division.date_earliest_division
    = "#{formatted_date_range(Division.date_earliest_division...@person_distance.overlap_dates.last.end, format: :words)}."
    Our voting record only starts in #{formatted_month(Division.date_earliest_division)}.
    So we can only consider votes from then.
  - else
    = "#{formatted_date_range(@person_distance.overlap_dates.first.begin...@person_distance.overlap_dates.last.end, format: :words)}."

%p
  - if @person_distance.nvotesdiffer.zero?
    They have
    %strong
      never
    voted differently
  - elsif @person_distance.nvotessame.zero?
    They have
    %strong
      never
    voted the same
  - elsif @person_distance.nvotesdiffer > @person_distance.nvotessame
    They have only voted
    %strong
      the same
      = pluralize(@person_distance.nvotessame, "time")
  - else
    They have only voted
    %strong
      differently
      = pluralize(@person_distance.nvotesdiffer, "time")

- if @person_distance.nvotesdiffer < @person_distance.nvotessame
  - if @person_distance.nvotesdiffer.positive?
    %h2 Divisions in which they voted differently
    = render "divisions/divisions", member: nil, divisions: @person_distance.divisions_different, house: nil

  = render "comparison_block", person_distance: @person_distance, policies: @policies_all_different, title: "Always voted differently on"
  = render "comparison_block", person_distance: @person_distance, policies: @policies_different_and_same, title: "Voted a mixture of the same and differently on"
  = render "comparison_block", person_distance: @person_distance, policies: @policies_all_same, title: "Always voted the same way on"

- else
  - if @person_distance.nvotesdiffer.positive?
    %h2 Divisions in which they voted the same
    = render "divisions/divisions", member: nil, divisions: @person_distance.divisions_same, house: nil

  = render "comparison_block", person_distance: @person_distance, policies: @policies_all_same, title: "Always voted the same way on"
  = render "comparison_block", person_distance: @person_distance, policies: @policies_different_and_same, title: "Voted a mixture of the same and differently on"
  = render "comparison_block", person_distance: @person_distance, policies: @policies_all_different, title: "Always voted differently on"
